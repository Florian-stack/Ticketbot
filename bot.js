const _0xf75133=_0x4341;(function(_0x4064d1,_0x41ad24){const _0x5c90bd=_0x4341,_0x2b7235=_0x4064d1();while(!![]){try{const _0x5b973b=parseInt(_0x5c90bd(0x1e7))/0x1*(parseInt(_0x5c90bd(0x1ec))/0x2)+parseInt(_0x5c90bd(0x18b))/0x3+parseInt(_0x5c90bd(0x1f1))/0x4+parseInt(_0x5c90bd(0x1e6))/0x5*(parseInt(_0x5c90bd(0x16d))/0x6)+-parseInt(_0x5c90bd(0x1e5))/0x7*(-parseInt(_0x5c90bd(0x1cd))/0x8)+-parseInt(_0x5c90bd(0x177))/0x9*(parseInt(_0x5c90bd(0x17e))/0xa)+-parseInt(_0x5c90bd(0x1a0))/0xb*(parseInt(_0x5c90bd(0x1d8))/0xc);if(_0x5b973b===_0x41ad24)break;else _0x2b7235['push'](_0x2b7235['shift']());}catch(_0x502ae5){_0x2b7235['push'](_0x2b7235['shift']());}}}(_0x14af,0x344b8));const {Client,GatewayIntentBits,EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle,StringSelectMenuBuilder,PermissionFlagsBits}=require(_0xf75133(0x19b)),{REST}=require(_0xf75133(0x1fe)),{Routes}=require(_0xf75133(0x18f)),config=require(_0xf75133(0x18c)),client=new Client({'intents':[GatewayIntentBits['Guilds'],GatewayIntentBits['GuildMessages'],GatewayIntentBits[_0xf75133(0x1ac)],GatewayIntentBits['MessageContent']]}),ticketChannels=new Map();client['on'](_0xf75133(0x1d2),async()=>{const _0x4cb752=_0xf75133;console[_0x4cb752(0x1d4)](_0x4cb752(0x175)+client['user'][_0x4cb752(0x1f4)]+'!'),await registerCommands();const _0x4f4ab4=client['guilds'][_0x4cb752(0x1f6)][_0x4cb752(0x189)](config[_0x4cb752(0x1b3)]);await _0x4f4ab4[_0x4cb752(0x1be)][_0x4cb752(0x178)](),console[_0x4cb752(0x1d4)]('Rollen\x20initialisiert:',_0x4f4ab4[_0x4cb752(0x1be)][_0x4cb752(0x1f6)]['size']);});function _0x4341(_0x51df18,_0x203058){const _0x14af7e=_0x14af();return _0x4341=function(_0x434115,_0x16aba2){_0x434115=_0x434115-0x16d;let _0x3d51b5=_0x14af7e[_0x434115];return _0x3d51b5;},_0x4341(_0x51df18,_0x203058);}async function registerCommands(){const _0x36b8c7=_0xf75133,_0x56065c=new REST({'version':'9'})[_0x36b8c7(0x1e2)](config['token']),_0x5adaba=[{'name':_0x36b8c7(0x1a6),'description':_0x36b8c7(0x1fd)},{'name':_0x36b8c7(0x1b7),'description':'Schließt\x20alle\x20aktiven\x20Tickets'}];try{await _0x56065c[_0x36b8c7(0x19e)](Routes[_0x36b8c7(0x193)](config[_0x36b8c7(0x1d6)],config[_0x36b8c7(0x1b3)]),{'body':_0x5adaba}),console[_0x36b8c7(0x1d4)](_0x36b8c7(0x1f3));}catch(_0xe9ac81){console['error'](_0x36b8c7(0x1fb),_0xe9ac81);}}async function sendLog(_0x47b8aa,_0x1a764a,_0x1ea687){const _0x59fd51=_0xf75133,_0x1694a9=client[_0x59fd51(0x179)][_0x59fd51(0x1f6)]['get'](config[_0x59fd51(0x1ba)]);if(!_0x1694a9)return;const _0x49ae8f=new EmbedBuilder()[_0x59fd51(0x1cf)](_0x59fd51(0x171)+_0x47b8aa)[_0x59fd51(0x1f9)](config[_0x59fd51(0x1db)][_0x59fd51(0x1f5)][_0x47b8aa]||0x2f3136)['setDescription'](_0x1ea687)[_0x59fd51(0x184)]({'name':_0x59fd51(0x1c1),'value':_0x1a764a[_0x59fd51(0x1ad)](),'inline':!![]},{'name':'Datum','value':new Date()[_0x59fd51(0x1bc)](),'inline':!![]})[_0x59fd51(0x1ae)]({'text':config['embeds'][_0x59fd51(0x1d9)][_0x59fd51(0x1d0)]});await _0x1694a9[_0x59fd51(0x172)]({'embeds':[_0x49ae8f]});}client['on'](_0xf75133(0x1e3),async _0x2790ee=>{const _0x2b7d91=_0xf75133;try{if(_0x2790ee[_0x2b7d91(0x1a4)]())switch(_0x2790ee[_0x2b7d91(0x19a)]){case _0x2b7d91(0x1a6):await createTicketPanel(_0x2790ee);break;case'close-all-tickets':await handleCloseAllTickets(_0x2790ee);break;}_0x2790ee['isStringSelectMenu']()&&_0x2790ee[_0x2b7d91(0x1b1)]===_0x2b7d91(0x186)&&await handleTicketCreation(_0x2790ee);if(_0x2790ee['isButton']())switch(_0x2790ee['customId']){case _0x2b7d91(0x194):await handleTicketClose(_0x2790ee);break;case _0x2b7d91(0x1f0):await handleTicketClaim(_0x2790ee);break;}}catch(_0x42a84e){console['error'](_0x2b7d91(0x1c3),_0x42a84e),_0x2790ee[_0x2b7d91(0x19f)]({'content':config[_0x2b7d91(0x16f)][_0x2b7d91(0x1ea)],'flags':0x40});}});async function createTicketPanel(_0x58985a){const _0x3c08a6=_0xf75133;if(!_0x58985a['memberPermissions'][_0x3c08a6(0x1a8)](PermissionFlagsBits[_0x3c08a6(0x1bf)]))return _0x58985a[_0x3c08a6(0x19f)]({'content':config['messages']['noPermission'],'flags':0x40});const _0x14c856=new EmbedBuilder()['setTitle'](config['embeds'][_0x3c08a6(0x1c5)][_0x3c08a6(0x190)])[_0x3c08a6(0x198)](config[_0x3c08a6(0x188)][_0x3c08a6(0x1c5)][_0x3c08a6(0x1b0)])['setColor'](config[_0x3c08a6(0x188)]['panel'][_0x3c08a6(0x1ce)])['setThumbnail'](config[_0x3c08a6(0x188)][_0x3c08a6(0x1c5)][_0x3c08a6(0x1e4)])[_0x3c08a6(0x1ae)]({'text':config[_0x3c08a6(0x188)][_0x3c08a6(0x1c5)][_0x3c08a6(0x1d0)]}),_0x34efef=new StringSelectMenuBuilder()[_0x3c08a6(0x1ed)](_0x3c08a6(0x186))['setPlaceholder'](config['messages'][_0x3c08a6(0x1af)])[_0x3c08a6(0x1b2)](Object['entries'](config[_0x3c08a6(0x1c2)])['map'](([_0x1cb07d,_0x3e600e])=>({'label':_0x3e600e[_0x3c08a6(0x192)],'emoji':_0x3e600e[_0x3c08a6(0x17f)],'value':_0x1cb07d})));await _0x58985a[_0x3c08a6(0x1de)]['send']({'embeds':[_0x14c856],'components':[new ActionRowBuilder()[_0x3c08a6(0x1ee)](_0x34efef)]}),await _0x58985a['reply']({'content':config[_0x3c08a6(0x16f)][_0x3c08a6(0x19d)],'flags':0x40});}async function handleTicketCreation(_0x2b01be){const _0x234168=_0xf75133,_0x54d755=_0x2b01be[_0x234168(0x1a9)][0x0],{emoji:_0x145739,name:_0x31d927}=config['ticketTypes'][_0x54d755];try{const _0x374efb=Array[_0x234168(0x1a3)](config['ticketRoles'][_0x54d755])?config[_0x234168(0x19c)][_0x54d755]:[config['ticketRoles'][_0x54d755]],_0x37cef0=_0x374efb['filter'](_0x5bb6af=>!_0x2b01be[_0x234168(0x1b5)]['roles'][_0x234168(0x1f6)][_0x234168(0x1a8)](_0x5bb6af));if(_0x37cef0['length']>0x0)throw new Error(config[_0x234168(0x16f)]['invalidRoles'][_0x234168(0x1c7)](_0x234168(0x18a),_0x37cef0[_0x234168(0x1c8)](',\x20')));if(ticketChannels[_0x234168(0x1a8)](_0x2b01be['user']['id']))return _0x2b01be[_0x234168(0x19f)]({'content':config[_0x234168(0x16f)][_0x234168(0x1a5)],'flags':0x40});const _0x1950c0=_0x2b01be[_0x234168(0x1c4)][_0x234168(0x1a2)][_0x234168(0x1c7)](/[^a-z0-9]/gi,'-')[_0x234168(0x1d7)](0x0,0x5a),_0x549dd8=[{'id':_0x2b01be['guild']['id'],'deny':[PermissionFlagsBits['ViewChannel']]},{'id':_0x2b01be['user']['id'],'allow':[PermissionFlagsBits['ViewChannel'],PermissionFlagsBits[_0x234168(0x1dc)]]},..._0x374efb['map'](_0x290a7a=>({'id':_0x290a7a,'allow':[PermissionFlagsBits[_0x234168(0x1fc)],PermissionFlagsBits[_0x234168(0x1dc)],PermissionFlagsBits[_0x234168(0x1b8)]]}))],_0x32fb54=await _0x2b01be[_0x234168(0x1b5)][_0x234168(0x179)]['create']({'name':_0x54d755+'-'+_0x1950c0,'parent':config[_0x234168(0x17a)][_0x54d755],'permissionOverwrites':_0x549dd8});ticketChannels['set'](_0x2b01be[_0x234168(0x1c4)]['id'],{'channelId':_0x32fb54['id'],'type':_0x54d755}),await sendLog(_0x234168(0x1aa),_0x2b01be[_0x234168(0x1c4)],_0x234168(0x1e9)+_0x31d927+_0x234168(0x1a7)+_0x32fb54[_0x234168(0x1ad)]());const _0x4e3eb8=new EmbedBuilder()[_0x234168(0x1cf)](config['embeds'][_0x234168(0x1d9)][_0x234168(0x174)][_0x54d755])[_0x234168(0x198)]([_0x234168(0x196)+_0x2b01be['user']+',\x0a'+config['messages'][_0x234168(0x181)],_0x234168(0x17d),_0x234168(0x1bb)+_0x374efb[_0x234168(0x182)](_0x3817c1=>_0x234168(0x1c6)+_0x3817c1+'>')[_0x234168(0x1c8)](_0x234168(0x1ff)),_0x234168(0x1b9)+config[_0x234168(0x16f)]['ticketOptions']][_0x234168(0x1c8)]('\x0a'))[_0x234168(0x1f9)](config[_0x234168(0x188)][_0x234168(0x1d9)]['color'])['setFooter']({'text':config['embeds']['ticket'][_0x234168(0x1d0)]}),_0x2334d5=new ActionRowBuilder()[_0x234168(0x1ee)](new ButtonBuilder()[_0x234168(0x1ed)](_0x234168(0x194))[_0x234168(0x1c9)](config[_0x234168(0x18d)]['close'][_0x234168(0x1f7)])[_0x234168(0x18e)](ButtonStyle[config[_0x234168(0x18d)][_0x234168(0x17b)][_0x234168(0x1eb)]])['setEmoji'](config[_0x234168(0x18d)]['close'][_0x234168(0x17f)]),new ButtonBuilder()['setCustomId']('claim_ticket')[_0x234168(0x1c9)](config['buttons'][_0x234168(0x1b4)][_0x234168(0x1f7)])['setStyle'](ButtonStyle[config[_0x234168(0x18d)]['claim'][_0x234168(0x1eb)]])['setEmoji'](config[_0x234168(0x18d)]['claim'][_0x234168(0x17f)]));await _0x32fb54['send']({'content':(_0x2b01be[_0x234168(0x1c4)]+'\x20'+_0x374efb[_0x234168(0x182)](_0x35481c=>_0x234168(0x1c6)+_0x35481c+'>')['join']('\x20'))['trim'](),'embeds':[_0x4e3eb8],'components':[_0x2334d5]}),await _0x2b01be[_0x234168(0x19f)]({'content':config['messages'][_0x234168(0x170)]+'\x20'+_0x32fb54,'flags':0x40});}catch(_0x2e1f66){console[_0x234168(0x1ea)](_0x234168(0x1d3),_0x2e1f66),await _0x2b01be[_0x234168(0x19f)]({'content':config[_0x234168(0x16f)][_0x234168(0x1ea)]+':\x20'+_0x2e1f66[_0x234168(0x180)],'flags':0x40});}}async function handleTicketClose(_0x46af89){const _0x1fc5e2=_0xf75133,_0x562157=Array[_0x1fc5e2(0x191)](ticketChannels[_0x1fc5e2(0x1b6)]())['find'](([_0x2cafb1,_0x5cbbf4])=>_0x5cbbf4[_0x1fc5e2(0x1f2)]===_0x46af89[_0x1fc5e2(0x1de)]['id']);if(!_0x562157)return;const [_0x3aa4cd,_0x35e737]=_0x562157;if(_0x46af89[_0x1fc5e2(0x1c4)]['id']!==_0x3aa4cd&&!_0x46af89['member'][_0x1fc5e2(0x1be)][_0x1fc5e2(0x1f6)][_0x1fc5e2(0x1cb)](...config['ticketRoles'][_0x35e737['type']]))return _0x46af89[_0x1fc5e2(0x19f)]({'content':config['messages'][_0x1fc5e2(0x1ab)],'flags':0x40});await sendLog('close',_0x46af89[_0x1fc5e2(0x1c4)],_0x1fc5e2(0x185)+_0x46af89['channel']['name']+_0x1fc5e2(0x1dd)+_0x46af89['user'][_0x1fc5e2(0x1f4)]),await _0x46af89[_0x1fc5e2(0x1de)][_0x1fc5e2(0x1df)](),ticketChannels['delete'](_0x3aa4cd);try{const _0x2c682=await client[_0x1fc5e2(0x1e8)][_0x1fc5e2(0x178)](_0x3aa4cd);await _0x2c682[_0x1fc5e2(0x172)](config[_0x1fc5e2(0x16f)]['ticketClosed']);}catch(_0x59b10a){console['error'](_0x1fc5e2(0x197),_0x59b10a);}}async function handleTicketClaim(_0x3723ac){const _0x1f8097=_0xf75133,_0x4a5793=Array[_0x1f8097(0x191)](ticketChannels[_0x1f8097(0x1a9)]())[_0x1f8097(0x1bd)](_0x576bb8=>_0x576bb8[_0x1f8097(0x1f2)]===_0x3723ac['channel']['id']);if(!_0x4a5793)return;const _0x2bd920=_0x3723ac[_0x1f8097(0x1f8)],_0x1b8740=Array[_0x1f8097(0x1a3)](config[_0x1f8097(0x19c)][_0x4a5793[_0x1f8097(0x1ca)]])?config[_0x1f8097(0x19c)][_0x4a5793[_0x1f8097(0x1ca)]]:[config[_0x1f8097(0x19c)][_0x4a5793[_0x1f8097(0x1ca)]]];if(!_0x1b8740['some'](_0x4645f4=>_0x2bd920['roles'][_0x1f8097(0x1f6)]['has'](_0x4645f4)))return _0x3723ac[_0x1f8097(0x19f)]({'content':config[_0x1f8097(0x16f)][_0x1f8097(0x1ab)],'flags':0x40});await Promise[_0x1f8097(0x1e1)](_0x1b8740[_0x1f8097(0x182)](async _0x46a6a5=>{const _0x34a3df=_0x1f8097;await _0x3723ac[_0x34a3df(0x1de)][_0x34a3df(0x173)][_0x34a3df(0x1df)](_0x46a6a5);})),await _0x3723ac[_0x1f8097(0x1de)][_0x1f8097(0x173)][_0x1f8097(0x1aa)](_0x2bd920['id'],{'ViewChannel':!![],'SendMessages':!![],'ManageMessages':!![]});const _0x4da1f7=EmbedBuilder[_0x1f8097(0x191)](_0x3723ac[_0x1f8097(0x180)][_0x1f8097(0x188)][0x0])[_0x1f8097(0x1da)](0x3,0x1,{'name':_0x1f8097(0x199),'value':'>\x20'+_0x2bd920}),_0x1ec0ec=new ActionRowBuilder()[_0x1f8097(0x1ee)](new ButtonBuilder()[_0x1f8097(0x1ed)](_0x1f8097(0x194))[_0x1f8097(0x1c9)](config['buttons']['close'][_0x1f8097(0x1f7)])['setStyle'](ButtonStyle[config[_0x1f8097(0x18d)]['close'][_0x1f8097(0x1eb)]])[_0x1f8097(0x1fa)](config[_0x1f8097(0x18d)][_0x1f8097(0x17b)][_0x1f8097(0x17f)]),new ButtonBuilder()[_0x1f8097(0x1ed)](_0x1f8097(0x1f0))[_0x1f8097(0x1c9)](config[_0x1f8097(0x16f)][_0x1f8097(0x195)])[_0x1f8097(0x18e)](ButtonStyle[_0x1f8097(0x1c0)])[_0x1f8097(0x1cc)](!![])[_0x1f8097(0x1fa)]('✅'));await _0x3723ac[_0x1f8097(0x180)][_0x1f8097(0x176)]({'embeds':[_0x4da1f7],'components':[_0x1ec0ec]}),await _0x3723ac[_0x1f8097(0x19f)](config[_0x1f8097(0x16f)][_0x1f8097(0x187)][_0x1f8097(0x1c7)](_0x1f8097(0x1d1),_0x2bd920[_0x1f8097(0x1ad)]())),await sendLog(_0x1f8097(0x1b4),_0x3723ac[_0x1f8097(0x1c4)],_0x1f8097(0x185)+_0x3723ac['channel']['toString']()+_0x1f8097(0x1ef)+_0x2bd920['toString']());}async function handleCloseAllTickets(_0x212930){const _0x3f6c22=_0xf75133;if(!_0x212930[_0x3f6c22(0x1a1)][_0x3f6c22(0x1a8)](PermissionFlagsBits[_0x3f6c22(0x1bf)]))return _0x212930[_0x3f6c22(0x19f)]({'content':config[_0x3f6c22(0x16f)][_0x3f6c22(0x1ab)],'flags':0x40});try{let _0x11493c=0x0;for(const [_0x1b1a0e,_0x5de3f2]of ticketChannels){const _0x37887d=_0x212930[_0x3f6c22(0x1b5)][_0x3f6c22(0x179)]['cache']['get'](_0x5de3f2[_0x3f6c22(0x1f2)]);_0x37887d&&(await _0x37887d[_0x3f6c22(0x1df)](),_0x11493c++);}ticketChannels[_0x3f6c22(0x16e)](),await _0x212930['reply']({'content':config[_0x3f6c22(0x16f)]['allClosed'][_0x3f6c22(0x1c7)]('{count}',_0x11493c),'flags':0x40});}catch(_0x327dd9){console[_0x3f6c22(0x1ea)](_0x3f6c22(0x183),_0x327dd9),await _0x212930[_0x3f6c22(0x19f)]({'content':config[_0x3f6c22(0x16f)][_0x3f6c22(0x17c)],'flags':0x40});}}client[_0xf75133(0x1e0)](config[_0xf75133(0x1d5)]);function _0x14af(){const _0x1a5d58=['ready','Ticket\x20Fehler:','log','token','clientId','slice','43068pVFHMz','ticket','spliceFields','logs','SendMessages','\x0a**Geschlossen\x20von:**\x20','channel','delete','login','all','setToken','interactionCreate','thumbnail','889KwaFLy','153380ybRoia','3sLqmBV','users','**Typ:**\x20','error','style','91774xlnTjy','setCustomId','addComponents','\x0a**Übernommen\x20von:**\x20','claim_ticket','1199724RCvzLZ','channelId','Commands\x20registriert!','tag','colors','cache','label','member','setColor','setEmoji','Fehler\x20beim\x20Registrieren:','ViewChannel','Erstellt\x20das\x20Ticket\x20Panel','@discordjs/rest','\x0a>\x20','54xnctha','clear','messages','ticketCreated','📝\x20Ticket\x20','send','permissionOverwrites','titles','Eingeloggt\x20als\x20','edit','126heZaFD','fetch','channels','ticketCategories','close','closeError','▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬','103660wfKqNg','emoji','message','ticketInstructions','map','Fehler\x20beim\x20Schließen:','addFields','**Ticket:**\x20','ticket_type','ticketClaimed','embeds','get','{roles}','67197LUFyVA','./config.js','buttons','setStyle','discord-api-types/v9','title','from','name','applicationGuildCommands','close_ticket','claimedLabel','Hallo\x20','DM\x20Fehler:','setDescription','**Bearbeitet\x20von:**','commandName','discord.js','ticketRoles','panelCreated','put','reply','1166xConfF','memberPermissions','username','isArray','isCommand','ticketAlreadyExists','ticket-panel','\x0a**Kanal:**\x20','has','values','create','noPermission','GuildMembers','toString','setFooter','selectPlaceholder','description','customId','addOptions','guildId','claim','guild','entries','close-all-tickets','ManageMessages','**Ticket-Optionen:**\x0a','logChannelId','**Zuständiges\x20Team:**\x0a>\x20','toLocaleString','find','roles','Administrator','Secondary','Benutzer','ticketTypes','Fehler:','user','panel','<@&','replace','join','setLabel','type','hasAny','setDisabled','232xvrWQb','color','setTitle','footer','{user}'];_0x14af=function(){return _0x1a5d58;};return _0x14af();}