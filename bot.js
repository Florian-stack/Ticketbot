const _0x2eb245=_0x5e82;(function(_0x1248b3,_0x51f247){const _0x2c28a6=_0x5e82,_0x361692=_0x1248b3();while(!![]){try{const _0xfc703b=-parseInt(_0x2c28a6(0x10e))/0x1+parseInt(_0x2c28a6(0xc8))/0x2+parseInt(_0x2c28a6(0xd8))/0x3+-parseInt(_0x2c28a6(0xe8))/0x4*(-parseInt(_0x2c28a6(0x12c))/0x5)+-parseInt(_0x2c28a6(0x105))/0x6*(parseInt(_0x2c28a6(0x129))/0x7)+-parseInt(_0x2c28a6(0xcf))/0x8*(parseInt(_0x2c28a6(0xca))/0x9)+parseInt(_0x2c28a6(0x112))/0xa;if(_0xfc703b===_0x51f247)break;else _0x361692['push'](_0x361692['shift']());}catch(_0x2b5ac0){_0x361692['push'](_0x361692['shift']());}}}(_0x27a4,0x8896b));const {Client,GatewayIntentBits,EmbedBuilder,ActionRowBuilder,ButtonBuilder,ButtonStyle,StringSelectMenuBuilder,PermissionFlagsBits}=require('discord.js'),{REST}=require('@discordjs/rest'),{Routes}=require(_0x2eb245(0x107)),config=require(_0x2eb245(0xb0)),client=new Client({'intents':[GatewayIntentBits['Guilds'],GatewayIntentBits[_0x2eb245(0xd5)],GatewayIntentBits[_0x2eb245(0x119)],GatewayIntentBits[_0x2eb245(0xe9)]]}),ticketChannels=new Map();function _0x27a4(){const _0x8ab3f8=['530433ytEfsH','panelCreated','user','ticketTypes','ticketAlreadyExists','112misYOD','login','noPermission','claimedLabel','**Typ:**\x20','Fehler\x20beim\x20Schließen:','GuildMessages','memberPermissions','cache','1223184MHitjT','allClosed','close-all-tickets','panel','ViewChannel','Ticket\x20Fehler:','message','ticket_type','toString','guild','thumbnail','fetch','all','setThumbnail','set','title','12aApcRW','MessageContent','closeError','log','color','ticketCreated','isArray','isButton','Fehler\x20beim\x20Registrieren:','slice','type','▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬▬','Secondary','roles','Administrator','map','**Ticket:**\x20','guildId','setTitle','emoji','titles','Benutzer','selectPlaceholder','ticketOptions','close','get','ticket','setDescription','guilds','172806SFitxK','channelId','discord-api-types/v9','spliceFields','setDisabled','users','create','member','has','316442JbArXW','size','username','addFields','6745670KYBkuv','some','close_ticket','clear','📝\x20Ticket\x20','tag','find','GuildMembers','style','replace','addOptions','claim_ticket','toLocaleString','logChannelId','ticketRoles','reply','join','entries','isCommand','channel','\x0a**Kanal:**\x20','customId','commandName','203SjkuWq','\x0a**Geschlossen\x20von:**\x20','channels','832760VzMRjp','setToken','buttons','setCustomId','from','embeds','\x0a**Übernommen\x20von:**\x20','hasAny','interactionCreate','isStringSelectMenu','ManageMessages','addComponents','values','delete','**Zuständiges\x20Team:**\x0a>\x20','send','./config.js','setLabel','Eingeloggt\x20als\x20','invalidRoles','colors','**Ticket-Optionen:**\x0a','ready','**Bearbeitet\x20von:**','claim','ticket-panel','length','ticketClaimed','name','footer','messages','edit','ticketInstructions','setStyle','setEmoji','setFooter','token','setColor','applicationGuildCommands','error','1908610pIffuy','Fehler:'];_0x27a4=function(){return _0x8ab3f8;};return _0x27a4();}client['on'](_0x2eb245(0xb6),async()=>{const _0x474ee3=_0x2eb245;console[_0x474ee3(0xeb)](_0x474ee3(0xb2)+client['user']['tag']+'!'),await registerCommands();const _0x306f03=client[_0x474ee3(0x104)][_0x474ee3(0xd7)][_0x474ee3(0x101)](config[_0x474ee3(0xf9)]);await _0x306f03[_0x474ee3(0xf5)]['fetch'](),console[_0x474ee3(0xeb)]('Rollen\x20initialisiert:',_0x306f03[_0x474ee3(0xf5)][_0x474ee3(0xd7)][_0x474ee3(0x10f)]);});async function registerCommands(){const _0x5528fd=_0x2eb245,_0x430e49=new REST({'version':'9'})[_0x5528fd(0x12d)](config[_0x5528fd(0xc4)]),_0x5be810=[{'name':_0x5528fd(0xb9),'description':'Erstellt\x20das\x20Ticket\x20Panel'},{'name':_0x5528fd(0xda),'description':'Schließt\x20alle\x20aktiven\x20Tickets'}];try{await _0x430e49['put'](Routes[_0x5528fd(0xc6)](config['clientId'],config['guildId']),{'body':_0x5be810}),console[_0x5528fd(0xeb)]('Commands\x20registriert!');}catch(_0x5ecaa1){console['error'](_0x5528fd(0xf0),_0x5ecaa1);}}function _0x5e82(_0x4d34d1,_0x746d4a){const _0x27a466=_0x27a4();return _0x5e82=function(_0x5e82db,_0x1928bd){_0x5e82db=_0x5e82db-0xa7;let _0x1fdf9d=_0x27a466[_0x5e82db];return _0x1fdf9d;},_0x5e82(_0x4d34d1,_0x746d4a);}async function sendLog(_0x47a3ad,_0x1b55ad,_0x200706){const _0x476c39=_0x2eb245,_0x2e21b6=client['channels'][_0x476c39(0xd7)][_0x476c39(0x101)](config[_0x476c39(0x11f)]);if(!_0x2e21b6)return;const _0x2f9102=new EmbedBuilder()[_0x476c39(0xfa)](_0x476c39(0x116)+_0x47a3ad)[_0x476c39(0xc5)](config['logs'][_0x476c39(0xb4)][_0x47a3ad]||0x2f3136)[_0x476c39(0x103)](_0x200706)[_0x476c39(0x111)]({'name':_0x476c39(0xfd),'value':_0x1b55ad[_0x476c39(0xe0)](),'inline':!![]},{'name':'Datum','value':new Date()[_0x476c39(0x11e)](),'inline':!![]})['setFooter']({'text':config[_0x476c39(0x131)][_0x476c39(0x102)][_0x476c39(0xbd)]});await _0x2e21b6['send']({'embeds':[_0x2f9102]});}client['on'](_0x2eb245(0xa8),async _0x26a240=>{const _0x5bf1fe=_0x2eb245;try{if(_0x26a240[_0x5bf1fe(0x124)]())switch(_0x26a240[_0x5bf1fe(0x128)]){case _0x5bf1fe(0xb9):await createTicketPanel(_0x26a240);break;case _0x5bf1fe(0xda):await handleCloseAllTickets(_0x26a240);break;}_0x26a240[_0x5bf1fe(0xa9)]()&&_0x26a240[_0x5bf1fe(0x127)]===_0x5bf1fe(0xdf)&&await handleTicketCreation(_0x26a240);if(_0x26a240[_0x5bf1fe(0xef)]())switch(_0x26a240[_0x5bf1fe(0x127)]){case _0x5bf1fe(0x114):await handleTicketClose(_0x26a240);break;case _0x5bf1fe(0x11d):await handleTicketClaim(_0x26a240);break;}}catch(_0x2c406f){console[_0x5bf1fe(0xc7)](_0x5bf1fe(0xc9),_0x2c406f),_0x26a240[_0x5bf1fe(0x121)]({'content':config['messages'][_0x5bf1fe(0xc7)],'flags':0x40});}});async function createTicketPanel(_0x50a7d0){const _0x3f531e=_0x2eb245;if(!_0x50a7d0[_0x3f531e(0xd6)]['has'](PermissionFlagsBits[_0x3f531e(0xf6)]))return _0x50a7d0[_0x3f531e(0x121)]({'content':config[_0x3f531e(0xbe)]['noPermission'],'flags':0x40});const _0x170bc8=new EmbedBuilder()[_0x3f531e(0xfa)](config[_0x3f531e(0x131)][_0x3f531e(0xdb)][_0x3f531e(0xe7)])[_0x3f531e(0x103)](config[_0x3f531e(0x131)][_0x3f531e(0xdb)]['description'])['setColor'](config[_0x3f531e(0x131)][_0x3f531e(0xdb)][_0x3f531e(0xec)])[_0x3f531e(0xe5)](config[_0x3f531e(0x131)][_0x3f531e(0xdb)][_0x3f531e(0xe2)])[_0x3f531e(0xc3)]({'text':config[_0x3f531e(0x131)]['panel'][_0x3f531e(0xbd)]}),_0x255e53=new StringSelectMenuBuilder()['setCustomId'](_0x3f531e(0xdf))['setPlaceholder'](config['messages'][_0x3f531e(0xfe)])[_0x3f531e(0x11c)](Object[_0x3f531e(0x123)](config[_0x3f531e(0xcd)])[_0x3f531e(0xf7)](([_0x4b7907,_0x51d103])=>({'label':_0x51d103['name'],'emoji':_0x51d103[_0x3f531e(0xfb)],'value':_0x4b7907})));await _0x50a7d0['channel'][_0x3f531e(0xaf)]({'embeds':[_0x170bc8],'components':[new ActionRowBuilder()['addComponents'](_0x255e53)]}),await _0x50a7d0[_0x3f531e(0x121)]({'content':config[_0x3f531e(0xbe)][_0x3f531e(0xcb)],'flags':0x40});}async function handleTicketCreation(_0x463f92){const _0x3753ed=_0x2eb245,_0x3d86b5=_0x463f92[_0x3753ed(0xac)][0x0],{emoji:_0x465e63,name:_0x344099}=config[_0x3753ed(0xcd)][_0x3d86b5];try{const _0x25bef8=Array[_0x3753ed(0xee)](config[_0x3753ed(0x120)][_0x3d86b5])?config[_0x3753ed(0x120)][_0x3d86b5]:[config[_0x3753ed(0x120)][_0x3d86b5]],_0x381184=_0x25bef8['filter'](_0x91dede=>!_0x463f92[_0x3753ed(0xe1)]['roles'][_0x3753ed(0xd7)][_0x3753ed(0x10d)](_0x91dede));if(_0x381184[_0x3753ed(0xba)]>0x0)throw new Error(config[_0x3753ed(0xbe)][_0x3753ed(0xb3)][_0x3753ed(0x11b)]('{roles}',_0x381184[_0x3753ed(0x122)](',\x20')));if(ticketChannels[_0x3753ed(0x10d)](_0x463f92[_0x3753ed(0xcc)]['id']))return _0x463f92[_0x3753ed(0x121)]({'content':config['messages'][_0x3753ed(0xce)],'flags':0x40});const _0x5a87fb=_0x463f92[_0x3753ed(0xcc)][_0x3753ed(0x110)]['replace'](/[^a-z0-9]/gi,'-')[_0x3753ed(0xf1)](0x0,0x5a),_0x2de138=[{'id':_0x463f92[_0x3753ed(0xe1)]['id'],'deny':[PermissionFlagsBits[_0x3753ed(0xdc)]]},{'id':_0x463f92[_0x3753ed(0xcc)]['id'],'allow':[PermissionFlagsBits[_0x3753ed(0xdc)],PermissionFlagsBits['SendMessages']]},..._0x25bef8['map'](_0x3d511e=>({'id':_0x3d511e,'allow':[PermissionFlagsBits[_0x3753ed(0xdc)],PermissionFlagsBits['SendMessages'],PermissionFlagsBits[_0x3753ed(0xaa)]]}))],_0x3a85be=await _0x463f92[_0x3753ed(0xe1)][_0x3753ed(0x12b)]['create']({'name':_0x3d86b5+'-'+_0x5a87fb,'parent':config['ticketCategories'][_0x3d86b5],'permissionOverwrites':_0x2de138});ticketChannels[_0x3753ed(0xe6)](_0x463f92[_0x3753ed(0xcc)]['id'],{'channelId':_0x3a85be['id'],'type':_0x3d86b5}),await sendLog('create',_0x463f92[_0x3753ed(0xcc)],_0x3753ed(0xd3)+_0x344099+_0x3753ed(0x126)+_0x3a85be['toString']());const _0x3d6b7f=new EmbedBuilder()[_0x3753ed(0xfa)](config['embeds'][_0x3753ed(0x102)][_0x3753ed(0xfc)][_0x3d86b5])[_0x3753ed(0x103)](['Hallo\x20'+_0x463f92[_0x3753ed(0xcc)]+',\x0a'+config[_0x3753ed(0xbe)][_0x3753ed(0xc0)],_0x3753ed(0xf3),_0x3753ed(0xae)+_0x25bef8[_0x3753ed(0xf7)](_0x42d7dc=>'<@&'+_0x42d7dc+'>')[_0x3753ed(0x122)]('\x0a>\x20'),_0x3753ed(0xb5)+config[_0x3753ed(0xbe)][_0x3753ed(0xff)]][_0x3753ed(0x122)]('\x0a'))[_0x3753ed(0xc5)](config[_0x3753ed(0x131)][_0x3753ed(0x102)][_0x3753ed(0xec)])[_0x3753ed(0xc3)]({'text':config['embeds'][_0x3753ed(0x102)][_0x3753ed(0xbd)]}),_0x23db01=new ActionRowBuilder()[_0x3753ed(0xab)](new ButtonBuilder()[_0x3753ed(0x12f)](_0x3753ed(0x114))[_0x3753ed(0xb1)](config[_0x3753ed(0x12e)][_0x3753ed(0x100)]['label'])[_0x3753ed(0xc1)](ButtonStyle[config[_0x3753ed(0x12e)][_0x3753ed(0x100)][_0x3753ed(0x11a)]])[_0x3753ed(0xc2)](config[_0x3753ed(0x12e)]['close'][_0x3753ed(0xfb)]),new ButtonBuilder()[_0x3753ed(0x12f)](_0x3753ed(0x11d))['setLabel'](config[_0x3753ed(0x12e)]['claim']['label'])['setStyle'](ButtonStyle[config[_0x3753ed(0x12e)]['claim'][_0x3753ed(0x11a)]])[_0x3753ed(0xc2)](config[_0x3753ed(0x12e)][_0x3753ed(0xb8)][_0x3753ed(0xfb)]));await _0x3a85be['send']({'content':_0x463f92[_0x3753ed(0xcc)]+'\x20'+_0x25bef8[_0x3753ed(0xf7)](_0x1ce8e1=>'<@&'+_0x1ce8e1+'>')['join']('\x20'),'embeds':[_0x3d6b7f],'components':[_0x23db01]}),await _0x463f92['reply']({'content':config[_0x3753ed(0xbe)][_0x3753ed(0xed)]+'\x20'+_0x3a85be,'flags':0x40});}catch(_0x40d867){console[_0x3753ed(0xc7)](_0x3753ed(0xdd),_0x40d867),await _0x463f92['reply']({'content':config[_0x3753ed(0xbe)]['error']+':\x20'+_0x40d867[_0x3753ed(0xde)],'flags':0x40});}}async function handleTicketClose(_0x53042a){const _0x2cded0=_0x2eb245,_0x4e5310=Array['from'](ticketChannels[_0x2cded0(0x123)]())['find'](([_0x538445,_0xe1821b])=>_0xe1821b[_0x2cded0(0x106)]===_0x53042a[_0x2cded0(0x125)]['id']);if(!_0x4e5310)return;const [_0x44bce9,_0x2e8a57]=_0x4e5310;if(_0x53042a[_0x2cded0(0xcc)]['id']!==_0x44bce9&&!_0x53042a['member'][_0x2cded0(0xf5)][_0x2cded0(0xd7)][_0x2cded0(0xa7)](...config[_0x2cded0(0x120)][_0x2e8a57[_0x2cded0(0xf2)]]))return _0x53042a['reply']({'content':config[_0x2cded0(0xbe)][_0x2cded0(0xd1)],'flags':0x40});await sendLog(_0x2cded0(0x100),_0x53042a['user'],'**Ticket:**\x20'+_0x53042a[_0x2cded0(0x125)][_0x2cded0(0xbc)]+_0x2cded0(0x12a)+_0x53042a[_0x2cded0(0xcc)][_0x2cded0(0x117)]),await _0x53042a['channel'][_0x2cded0(0xad)](),ticketChannels[_0x2cded0(0xad)](_0x44bce9);try{const _0x48380e=await client[_0x2cded0(0x10a)][_0x2cded0(0xe3)](_0x44bce9);await _0x48380e['send'](config['messages']['ticketClosed']);}catch(_0x352f2e){console[_0x2cded0(0xc7)]('DM\x20Fehler:',_0x352f2e);}}async function handleTicketClaim(_0x1bb3df){const _0x48b74e=_0x2eb245,_0x4d123c=Array[_0x48b74e(0x130)](ticketChannels[_0x48b74e(0xac)]())[_0x48b74e(0x118)](_0x436949=>_0x436949['channelId']===_0x1bb3df[_0x48b74e(0x125)]['id']);if(!_0x4d123c)return;const _0x31152c=_0x1bb3df[_0x48b74e(0x10c)],_0x1c108f=Array['isArray'](config[_0x48b74e(0x120)][_0x4d123c[_0x48b74e(0xf2)]])?config[_0x48b74e(0x120)][_0x4d123c[_0x48b74e(0xf2)]]:[config[_0x48b74e(0x120)][_0x4d123c[_0x48b74e(0xf2)]]];if(!_0x1c108f[_0x48b74e(0x113)](_0x4810f3=>_0x31152c['roles'][_0x48b74e(0xd7)][_0x48b74e(0x10d)](_0x4810f3)))return _0x1bb3df[_0x48b74e(0x121)]({'content':config[_0x48b74e(0xbe)][_0x48b74e(0xd1)],'flags':0x40});await Promise[_0x48b74e(0xe4)](_0x1c108f['map'](async _0x3c8066=>{const _0x4481fd=_0x48b74e;await _0x1bb3df['channel']['permissionOverwrites'][_0x4481fd(0xad)](_0x3c8066);})),await _0x1bb3df[_0x48b74e(0x125)]['permissionOverwrites'][_0x48b74e(0x10b)](_0x31152c['id'],{'ViewChannel':!![],'SendMessages':!![],'ManageMessages':!![]});const _0x411565=EmbedBuilder[_0x48b74e(0x130)](_0x1bb3df[_0x48b74e(0xde)]['embeds'][0x0])[_0x48b74e(0x108)](0x3,0x1,{'name':_0x48b74e(0xb7),'value':'>\x20'+_0x31152c}),_0x1cd1a1=new ActionRowBuilder()[_0x48b74e(0xab)](new ButtonBuilder()[_0x48b74e(0x12f)](_0x48b74e(0x114))[_0x48b74e(0xb1)](config[_0x48b74e(0x12e)][_0x48b74e(0x100)]['label'])[_0x48b74e(0xc1)](ButtonStyle[config[_0x48b74e(0x12e)][_0x48b74e(0x100)][_0x48b74e(0x11a)]])['setEmoji'](config[_0x48b74e(0x12e)]['close'][_0x48b74e(0xfb)]),new ButtonBuilder()[_0x48b74e(0x12f)](_0x48b74e(0x11d))[_0x48b74e(0xb1)](config[_0x48b74e(0xbe)][_0x48b74e(0xd2)])[_0x48b74e(0xc1)](ButtonStyle[_0x48b74e(0xf4)])[_0x48b74e(0x109)](!![])[_0x48b74e(0xc2)]('✅'));await _0x1bb3df[_0x48b74e(0xde)][_0x48b74e(0xbf)]({'embeds':[_0x411565],'components':[_0x1cd1a1]}),await _0x1bb3df[_0x48b74e(0x121)](config['messages'][_0x48b74e(0xbb)][_0x48b74e(0x11b)]('{user}',_0x31152c['toString']())),await sendLog(_0x48b74e(0xb8),_0x1bb3df[_0x48b74e(0xcc)],_0x48b74e(0xf8)+_0x1bb3df['channel'][_0x48b74e(0xe0)]()+_0x48b74e(0x132)+_0x31152c[_0x48b74e(0xe0)]());}async function handleCloseAllTickets(_0x2d33fd){const _0x439db3=_0x2eb245;if(!_0x2d33fd[_0x439db3(0xd6)][_0x439db3(0x10d)](PermissionFlagsBits[_0x439db3(0xf6)]))return _0x2d33fd[_0x439db3(0x121)]({'content':config[_0x439db3(0xbe)][_0x439db3(0xd1)],'flags':0x40});try{let _0x40011d=0x0;for(const [_0x1451d4,_0x1dddac]of ticketChannels){const _0x52f09a=_0x2d33fd[_0x439db3(0xe1)][_0x439db3(0x12b)]['cache'][_0x439db3(0x101)](_0x1dddac['channelId']);_0x52f09a&&(await _0x52f09a[_0x439db3(0xad)](),_0x40011d++);}ticketChannels[_0x439db3(0x115)](),await _0x2d33fd[_0x439db3(0x121)]({'content':config[_0x439db3(0xbe)][_0x439db3(0xd9)][_0x439db3(0x11b)]('{count}',_0x40011d),'flags':0x40});}catch(_0x5aaa69){console[_0x439db3(0xc7)](_0x439db3(0xd4),_0x5aaa69),await _0x2d33fd['reply']({'content':config[_0x439db3(0xbe)][_0x439db3(0xea)],'flags':0x40});}}client[_0x2eb245(0xd0)](config['token']);